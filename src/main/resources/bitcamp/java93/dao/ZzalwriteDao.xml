<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="bitcamp.java93.dao.ZzalwriteDao">
  
  <resultMap type="zzal" id="zzalMap">
    <id column="zzno" property="zzno"/>
    <result column="mno" property="mno"/>
    <result column="cno" property="cno"/>
    <result column="cono" property="cono"/>
    <result column="titl" property="title"/>
    <result column="pic" property="mainPic"/>
    <result column="cdt" property="cdt"/>
  </resultMap>
  
  
  <resultMap type="page" id="pageMap">
    <id column="zno" property="zzalpageNo"/>
    <result column="zzno" property="zzalNo"/>
    <result column="pgno" property="pageNo"/>
    <result column="type" property="conTypez"/>
    <result column="pic" property="pagePic"/>
    <result column="cont" property="ConTextz"/>
  </resultMap>
  
  <sql id="select1">
    select zzno, mno, cno, cono, titl, pic, cdt
    from zzal_lect
  </sql>
  
	<!-- <insert id="insert" parameterType="zzal">
    insert into zzal_lect(zzno, mno, cno, titl, cdt) 
    values(#{zzno}, #{mno}, #{cno}, #{title}, #{cdt})
  </insert> -->
  
  <!-- <insert id="insert" parameterType="zzal">
    insert into zzal_lect(zzno, mno, cno, titl, pic, cdt) 
    values(#{zzno}, #{mno}, #{cno}, #{title}, #{mainPic}, #{cdt})
  </insert> -->
  
  <insert id="insert" parameterType="zzal">
    insert into zzal_lect(mno, cno, cono, titl, pic, cdt) 
    values(#{mno}, #{cno}, Case When #{cono} = 0 then null else #{cono} end, #{title}, #{mainPic}, curdate())
 
  </insert>
  
  <insert id="insertPage" parameterType="page">
    <selectKey resultType="int" keyProperty="zzalNo" order="BEFORE">
        SELECT MAX(last_insert_id(z.zzno)) FROM zzal_lect z       
    </selectKey>
    insert into page(zzno, pgno, pic, cont) 
    values(#{zzalNo}, #{pageNo}, #{pagePic},#{ConTextZ});
  </insert>
 <!--  <insert id="insertPhoto" parameterType="map">
    insert into zzal_lect(zzno, pic) 
    values(#{zzno}, #{mainPic})
  </insert> -->

</mapper> 




